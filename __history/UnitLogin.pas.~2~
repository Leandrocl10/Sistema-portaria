unit UnitLogin;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls, DB, ADODB,UnitPrincipal;

type
  TFormLogin = class(TForm)
    lblUsuario: TLabel;
    lblSenha: TLabel;
    edtUsuario: TEdit;
    edtSenha: TEdit;
    btnEntar: TButton;
    btnCancelar: TButton;
    lblSistemaPortaria: TLabel;
    conexao: TADOConnection;
    qryLogin: TADOQuery;
    dsLogin: TDataSource;
    procedure btnEntarClick(Sender: TObject);
    procedure btnCancelarClick(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  FormLogin: TFormLogin;

implementation

{$R *.dfm}

procedure TFormLogin.btnCancelarClick(Sender: TObject);
begin
Close;
end;

procedure TFormLogin.btnEntarClick(Sender: TObject);

begin
  qryLogin.Close;
  qryLogin.SQL.Clear;
  qryLogin.SQL.Add('SELECT * FROM Usuario');
  qryLogin.SQL.Add('WHERE Usuario = :Usuario AND Senha = :Senha');
  qryLogin.Parameters.ParamByName('Usuario').Value := edtUsuario.Text;
  qryLogin.Parameters.ParamByName('Senha').Value := edtSenha.Text;
  qryLogin.Open;

  if not qryLogin.IsEmpty then
  begin
    Hide;
    FormPrincipal := TFormPrincipal.Create(nil);
    try
    formPrincipal.ShowModal;
    finally
    FormPrincipal.Free;
    end;
    Show;
  end
  else
  ShowMessage('Usuário ou senha inválidos!')
end;


end.
